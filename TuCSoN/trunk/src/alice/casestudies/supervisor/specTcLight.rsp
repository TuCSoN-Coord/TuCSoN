
% ReSpecT specification used into tc_light ( LIGHT SUPERVISOR CASE STUDY )

% Initialization tuples
reaction(
	time(200),
	endo,
	(
		out(input(ag_intensity)),
		out(output(ag_intensity))
	)
).

% Checks writing permissions
reaction(
	out(cmd(X)),
	(exo, response),
	(
		in(cmd(X)),
		event_source(Src), rd(input(Src)),
		out(X)
	)
).

% Checks reading permissions
reaction(
	inp(X),
	(exo, request),
	(
		in(X),
		event_source(Src), rd(input(Src)),
		out(X)
	)
).

% Sets a new intensity value to the led actuator
reaction(
	out(set(intensity,X)),
	(response, internal),
	(
		in(set(intensity,X)),
		led ? setEnv(intensity,X)
	)
).

% Starts the check led's status routine
reaction(
	out(read(intensity)),
	(internal, response),
	in(read(intensity))
).

% Asks the resource for led's status
reaction(
	in(read(intensity)),
	internal,
	led ? getEnv(intensity,X)
).

% Reacting to environment event
reaction(
	getEnv(intensity,X),
	from_env,
	out(intensity_set_to(X))
).
		