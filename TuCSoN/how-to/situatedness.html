<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #737373;
    background-color: white;
    margin: 10px 13px 10px 13px;
}
table {
	margin: 10px 0 15px 0;
	border-collapse: collapse;
}
td,th {	
	border: 1px solid #ddd;
	padding: 3px 10px;
}
th {
	padding: 5px 10px;	
}

a {
    color: #0069d6;
}
a:hover {
    color: #0050a3;
    text-decoration: none;
}
a img {
    border: none;
}
p {
    margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    color: #404040;
    line-height: 36px;
}
h1 {
    margin-bottom: 18px;
    font-size: 30px;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}
h4 {
    font-size: 16px;
}
h5 {
    font-size: 14px;
}
h6 {
    font-size: 13px;
}
hr {
    margin: 0 0 19px;
    border: 0;
    border-bottom: 1px solid #ccc;
}
blockquote {
    padding: 13px 13px 21px 15px;
    margin-bottom: 18px;
    font-family:georgia,serif;
    font-style: italic;
}
blockquote:before {
    content:"\201C";
    font-size:40px;
    margin-left:-10px;
    font-family:georgia,serif;
    color:#eee;
}
blockquote p {
    font-size: 14px;
    font-weight: 300;
    line-height: 18px;
    margin-bottom: 0;
    font-style: italic;
}
code, pre {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
    background-color: #fee9cc;
    color: rgba(0, 0, 0, 0.75);
    padding: 1px 3px;
    font-size: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
pre {
    display: block;
    padding: 14px;
    margin: 0 0 18px;
    line-height: 16px;
    font-size: 11px;
    border: 1px solid #d9d9d9;
    white-space: pre-wrap;
    word-wrap: break-word;
}
pre code {
    background-color: #fff;
    color:#737373;
    font-size: 11px;
    padding: 0;
}
sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:10px auto;
    }
}
@media print {
	body,code,pre code,h1,h2,h3,h4,h5,h6 {
		color: black;
	}
	table, pre {
		page-break-inside: avoid;
	}
}
</style>
<title>Situatedness in TuCSoN (with ReSpecT)</title>
<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[['$$$','$$$']]}});</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<h1>Situatedness in TuCSoN (with ReSpecT)</h1>

<p>In this brief "how-to", you will learn TuCSoN and <a href="http://respect.apice.unibo.it">ReSpecT</a> main API available to developers of <em>situated MAS</em>, willing to exploit TuCSoN-provided <em>situated coordination</em> facilities.</p>

<p>Assumptions are you are familiar with TuCSoN core API and ReSpecT programming.</p>

<p>Prior to reading this how-to is <em>highly recommended</em> to <strong>read the reference paper</strong> on supporting situatedness in MAS:</p>

<ul>
<li>Casadei, M., Omicini, A.: <em>"Situated tuple centres in ReSpecT"</em>. In Shin, S.Y., Ossowski, S., Menezes, R., Viroli, M., eds.:
24th Annual ACM Symposium on Applied Computing (SAC 2009). Volume III., Honolulu, Hawai’i, USA, ACM (8–12 March 2009) 1361
1368</li>
</ul>


<p>available from <a href="http://apice.unibo.it/xwiki/bin/view/Publications/RespectSac09">here</a>.</p>

<p>Suggested readings complementing the content of this "how-to" are:</p>

<ul>
<li><p>Mariani, S., Omicini, A.: <em>"Coordination in Situated Systems: Engineering MAS Environment in TuCSoN"</em>. In Internet and Distributed Computing Systems, Lecture Notes in Computer Science 8729, 22-24 September 2014. Available <a href="http://apice.unibo.it/xwiki/bin/view/Publications/SituatedcoordIdcs2014">here</a>.</p></li>
<li><p>Mariani, S., Omicini, A.: <em>"TuCSoN Coordination for MAS Situatedness: Towards a Methodology"</em>. In WOA 2014 – XV Workshop Nazionale "Dagli Oggetti agli Agenti", CEUR Workshop Proceedings 1260, September 2014. Available <a href="http://apice.unibo.it/xwiki/bin/view/Publications/TucsonWoa2014">here</a>.</p></li>
</ul>


<hr />

<ol>
<li><p><a href="#situated">Situatedness in TuCSoN</a></p>

<p>1.1 <a href="#api">API Overview</a></p>

<p>1.2 <a href="#hands-on">"Hands-on" step-by-step tour</a></p></li>
<li><p><a href="#contact">Contact Information</a></p></li>
</ol>


<hr />

<h3>1. <a name="situated">Situatedness in TuCSoN</a></h3>

<hr />

<h6>1.1 <a name="api">API Overview</a></h6>

<p>Situated coordination services in TuCSoN are mediated by <strong>transducers</strong>, representing <em>sensors</em>, <em>actuators</em>, "environmental resources" in general within the TuCSoN-coordinated MAS--called <strong>probes</strong>. Thus, designing a situated MAS with TuCSoN amounts at dealing with the following tasks:</p>

<ol>
<li>implementing probes</li>
<li>implementing their transducers</li>
<li>dynamically instantiating and associating them upon need</li>
<li>implement the situated coordination policies needed by the application at hand</li>
</ol>


<p><strong>1. Implement Probes.</strong> While implementing their probes, developers should adhere to the <code>ISimpleProbe</code> interface, depicted below:</p>

<p><img src="UML-Probe.jpeg" alt="Probes API"></p>

<p>Methods <code>readValue</code>/<code>writeValue</code> have to be implemented for sensors and actuators, respectively. These methods should embed the "logic" of interaction with the specific probe, either software (e.g. in a simulation) or hardware (e.g. in a real-world deployment).</p>

<p>Please notice: being creation and association of classes implementing probes and transducers dynamic, within such methods <strong>it is good practice to</strong>:</p>

<ol>
<li><em>check if the association with the transducer has been done</em>. It is good practice to give the probe a private member field storing the id of the associated transducer (as requested by method <code>getTransducer</code>) and to check such field for existence prior to reading or writing</li>
<li>if the association has been done (such field is not <code>null</code>), <em>a reference to the transducer should be retrieved</em>, using method <code>getTransducer</code> of singleton class <code>TransducersManager</code>--whose reference, <em>unique per TuCSoN node</em>, can be obtained by calling <code>TransducerManager.INSTANCE</code></li>
</ol>


<p>Once the probe and its transducer have been implemented, run-time creation and association can be achieved by exploiting the Transducers Manager (see point 3 below).</p>

<p><strong>2. Implement Transducers.</strong> TuCSoN supports developers in implementing transducers by providing the <code>AbstractTransducer</code> Java class depicted below:</p>

<p><img src="UML-Transducer.jpeg" alt="Transducers API"></p>

<p>Such class should be subclassed implementing <strong>at least one</strong> <a href="#1">[1]</a> of its protected methods, depending on whether the transducer is responsible for a <em>sensor</em> or an <em>actuator</em>:</p>

<ul>
<li><code>getEnv</code> is meant for sensor transducers. It "stimulates" the sensor probe to perceive the property of the portion of the MAS environment it can observe (<code>key</code> parameter), outputting the perceived value in the tuple centre the transducer is bound to.</li>
<li><code>setEnv</code> is meant for actuator transducers. It commands the actuator probe to modify the property of the portion of the MAS environment it can act upon.</li>
</ul>


<p>For both methods, the most simple and straightforward implementation is to iterate through the protected member field <code>this.probes</code> (storing the list of the probes associated to the transducer) to read/write the value of the environmental property of interest, by using method <code>readValue</code>/<code>writeValue</code>. The method should return a <code>boolean</code> value representing success or failure of the operation.</p>

<p><strong>3. Exploit the Tranducers Manager.</strong> TuCSoN provides services for creation, (de)registration, etc. of transducers and probes, which have to be requested through <em>well-formed tuples to be put into the special tuple centre</em> <code>'$ENV’</code>:</p>

<ul>
<li><code>createTransducerSensor(@Tcid,@Tclass,@Tid,@Pclass,@Pid)</code>, where:

<ul>
<li><code>Tcid</code> is the <code>TucsonTupleCentreId</code> of the tuple centre mediating transducer's interactions--<strong>must be</strong> <code>'$ENV'</code></li>
<li><code>Tclass</code> is the <em>full name</em> of the Java class implementing the transducer</li>
<li><code>Tid</code> is the id <a href="#2">[2]</a> of the transducer we are requesting to be created, to be used, e.g., within ReSpecT reactions</li>
<li><code>Pclass</code> is the <em>full name</em> of the Java class implementing the probe this transducer will manage</li>
<li><code>Pid</code> is the id <a href="#2">[2]</a> of the probe this transducer will manage, to be used, e.g., for the other management operations listed here</li>
</ul>
</li>
<li><code>createTransducerActuator(@Tcid,@Tclass,@Tid,@Pclass,@Pid)</code>, whose parameters are the same as above</li>
<li><code>addSensor(Class,@Pid,@Tid)</code>, where:

<ul>
<li><code>Class</code> is the full name of the Java class implementing the probe to be added to the list of those probes managed by the transducer <code>Tid</code>, which must be <strong>already existing</strong></li>
<li><code>Pid</code> is the id of the probe we are adding to the situated MAS</li>
<li><code>Tid</code> is the id of the transducer which this probe should be added to</li>
</ul>
</li>
<li><code>addActuator(Class,@Pid,@Tid)</code>, whose parameters are the same as above</li>
<li><code>removeResource(@Pid)</code>, where:

<ul>
<li><code>Pid</code> is the id of the probe to be deregistered and terminated</li>
</ul>
</li>
<li><code>changeTransducer(@Pid,@Tid)</code>, where:

<ul>
<li><code>Pid</code> is the id of the probe whose management should be given to another transducer, which must be <strong>already existing</strong></li>
<li><code>Tid</code> is the id of the transducer which should manage the probe from now on</li>
</ul>
</li>
</ul>


<p>The TuCSoN architectural component in charge of executing such management operations is the <code>TransducersManager</code>, whose API is depicted below:</p>

<p><img src="UML-TM.jpeg" alt="TuCSoN Transducers Manager"></p>

<p><strong>4. Exploit ReSpecT programming.</strong></p>

<p>Likewise transducers mediate between environmental resources (the probes) and the MAS, tuple centres mediate between transducers and agents. Tuple centres mediation is <em>necessary</em> because <code>getEnv</code> and <code>setEnv</code> are ReSpecT-only primitives, not accessible to TuCSoN agents. This enforces <em>decoupling</em> and leverages <em>encapsulation</em> as well as <em>separation of concerns</em>.</p>

<p>ReSpecT programming is necessarily application-specific, but a core of general purpose operations to carry out can be devised <a href="#3">[3]</a>:</p>

<ul>
<li><p>first of all, it is necessary to <em>react to an interaction request issued by an agent toward a probe</em>. <strong>The agent request is reified in a tuple</strong>, which ReSpecT interprets to call the right operation on the transducer associated to the probe target of the operation (<code>getEnv</code> or <code>setEnv</code>)</p>

<ul>
<li><p>e.g., in the case of a <em>sensor</em></p>

<pre><code>   reaction(
        in(sense(temp(T))),
           (operation, invocation),
           sensor@localhost:20504 ? getEnv(temp, T)
   ).
</code></pre>

<p>where <code>sensor</code> is the <code>Pid</code> of the probe (the <code>Tid</code> of the associated transducer is automagically retrieved by ReSpecT).</p></li>
</ul>
</li>
<li><p>then, it is possible to <em>react to the event of operation completion by the resource</em>, that is, to the environmental event generated (either reactively or proactively) by the probe (<code>getEnv</code> or <code>setEnv</code>)</p>

<ul>
<li><p>e.g., following previous ReSpecT specification</p>

<pre><code>   reaction(
        getEnv(temp, T),
        (from_env, completion),
            out(sense(temp(T)))
   ).
</code></pre>

<p>where <code>from_env</code> is the guard predicate filtering events coming from the environment (thus, from a transducer).</p></li>
</ul>
</li>
</ul>


<hr />

<h6>1.1 <a name="hands">"Hands-on" step-by-step tour</a></h6>

<p><em>TBD</em>.</p>

<p>In the meanwhile, you can read through the comments in TuCSoN "Thermostat MAS" example source files, <a href="https://bitbucket.org/smariani/tucson/src/da7cf3835c62/TuCSoN/trunk/src/alice/tucson/examples/situatedness/?at=master">here</a>.</p>

<hr />

<h3><a name="contact">Contact Information</a></h3>

<p><strong>Author</strong> of this "how-to":</p>

<ul>
<li><em>Stefano Mariani</em>, DISI - Università di Bologna (<a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#x6f;&#58;&#115;&#46;&#109;&#x61;&#114;&#105;&#x61;&#110;&#105;&#64;&#x75;&#x6e;&#105;&#x62;&#111;&#x2e;&#105;&#x74;">&#x73;&#46;&#109;&#x61;&#114;&#x69;&#97;&#x6e;&#x69;&#x40;&#117;&#110;&#105;&#98;&#111;&#46;&#x69;&#x74;</a>)</li>
</ul>


<p><strong>Authors</strong> of TuCSoN in TuCSoN "People" section of its main site, here > <a href="http://apice.unibo.it/xwiki/bin/view/TuCSoN/People">http://apice.unibo.it/xwiki/bin/view/TuCSoN/People</a>.</p>

<hr />

<p><a name="1">[1]</a> Also both methods can be implemented, e.g. if the transducer is responsible for a probe able to behave both as a sensor and as an actuator.</p>

<p><a name="2">[2]</a> For both transducers’ and probes' ids the same syntactic rules as those for agent ids and tuple centres ids hold, that is, any valid <a href="http://tuprolog.unibo.it">tuProlog</a> <em>ground term</em>. See tuProlog documentation, <a href="http://apice.unibo.it/xwiki/bin/download/Tuprolog/Download/tuprolog-guide-2.9.0.pdf">here</a>.</p>

<p><a name="3">[3]</a> What follows is based on the example in package <code>alice.tucson.examples.situatedness</code>, which can be run either by using the bash script <code>TuCSoN_boot.sh</code> or by typing <code>$&gt; java -cp tucson.jar alice.tucson.examples.situatedness.Thermostat</code> in a command prompt (a TuCSoN node should be active on <code>localhost:20504</code>).</p>
</body>
</html>